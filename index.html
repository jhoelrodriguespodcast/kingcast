<script>
document.getElementById("followForm").addEventListener("submit", async function(e) {
  e.preventDefault();
  const email = document.getElementById("email").value;
  let cidade = "Desconhecida";
  let ip = "";

  try {
    const resp = await fetch("https://ipapi.co/json/");
    const data = await resp.json();
    cidade = data.city || cidade;
    ip = data.ip || "";
  } catch {
    console.warn("Erro ao obter cidade/IP");
  }

  const scriptURL = "https://script.google.com/macros/s/AKfycbzImoosd1gIzK-MZQmgxpojl_0tXUEFRHNowiI5VPi0JnWbwXl3kTYaeMkHQSe5A2wdjg/exec";

  const formData = new FormData();
  formData.append("email", email);
  formData.append("cidade", cidade);
  formData.append("ip", ip);

  const response = await fetch(scriptURL, { method: "POST", body: formData });

  if (response.ok) {
    document.getElementById("msg").textContent = "Obrigado por seguir! ðŸŽ‰";
    e.target.reset();
  } else {
    document.getElementById("msg").textContent = "Erro ao enviar. Tente novamente.";
  }
});
</script>
