<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>KingCast Podcast</title>
  <style>
    body { font-family: Arial, sans-serif; background-color: #f4f4f4; margin: 0; padding: 20px; }
    h1 { text-align: center; color: #333; }
    h2 { color: #444; margin-top: 30px; }
    .podcast { background: #fff; padding: 15px; margin: 15px auto; border-radius: 10px; max-width: 600px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
    audio { width: 100%; margin-top: 5px; }
    .cover { display: block; margin: 0 auto 10px; max-width: 100%; border-radius: 10px; }
  </style>
</head>
<body>
  <h1>üéôÔ∏è KingCast Podcast</h1>
  <img src="kingCast.png" alt="Capa do Podcast" class="cover">

  <div id="episodes"></div>

  <script>
    const repoOwner = "jhoelrodriguespodcast";
    const repoName = "kingcast";

    async function loadEpisodes() {
      try {
        const res = await fetch(`https://api.github.com/repos/${repoOwner}/${repoName}/contents`);
        const items = await res.json();

        // Filtra apenas pastas
        const folders = items.filter(item => item.type === "dir");

        const container = document.getElementById("episodes");

        // Para cada pasta (tema)
        for (const folder of folders) {
          // Pega arquivos dentro da pasta
          const resFolder = await fetch(folder.url);
          const files = await resFolder.json();

          const mp3Files = files.filter(f => f.name.toLowerCase().endsWith(".mp3"));
          if (mp3Files.length === 0) continue; // pula se n√£o tiver √°udio

          // Cria se√ß√£o com t√≠tulo da pasta
          const section = document.createElement("div");
          section.innerHTML = `<h2>üìÇ ${folder.name}</h2>`;
          container.appendChild(section);

          // Lista √°udios
          mp3Files.forEach(file => {
            const div = document.createElement("div");
            div.className = "podcast";
            div.innerHTML = `
              <h3>${file.name.replace(/\.mp3$/i, '')}</h3>
              <audio controls>
                <source src="${file.download_url}" type="audio/mpeg">
                Seu navegador n√£o suporta √°udio HTML5.
              </audio>
            `;
            section.appendChild(div);
          });
        }
      } catch (err) {
        console.error("Erro ao carregar epis√≥dios:", err);
      }
    }

    loadEpisodes();
  </script>
</body>
</html>
