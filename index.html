<div class="subscribe">
  <h2>Siga e receba novidades</h2>
  <form id="subscribeForm">
    <input type="email" name="email" placeholder="Digite seu email" required>
    <button type="submit">Seguir</button>
  </form>
  <p id="message"></p>
</div>

<script>
  document.getElementById("subscribeForm").addEventListener("submit", async function(e) {
    e.preventDefault();
    const email = e.target.email.value;
    let cidade = "Desconhecida";
    try {
      const resp = await fetch("https://ipapi.co/json/");
      const data = await resp.json();
      cidade = data.city || cidade;
    } catch {
      console.warn("Erro ao buscar cidade pelo IP.");
    }

    const scriptURL = "https://script.google.com/macros/s/AKfycbwSAMouySWAIrfjZZXuCC0HpYaEI3kS7amSf6fAx13syxRRWvy_TUlIQ1ORw7KUiqynLQ/exec";

    const formData = new FormData();
    formData.append("email", email);
    formData.append("cidade", cidade);

    await fetch(scriptURL, {
      method: "POST",
      body: formData
    });

    document.getElementById("message").textContent = "Obrigado por seguir! ðŸŽ‰";
    e.target.reset();
  });
</script>
